#include <sys/types.h>
#include <sys/stat.h>
#include <stdio.h>
int main() {
 mode_t oldMask, newMask;
 // Get the current file mode creation mask
 oldMask = umask((mode_t)0);
 printf("\n Old mask = %o\n", (int)oldMask);
 // Check and modify group permissions in the mask
 if (oldMask & S_IRGRP) {
 printf("\nChanging group read permission from Masked to unmasked.\n");
 oldMask = (oldMask ^ S_IRGRP);
 }
 // Set new mask with group write and execute permissions unmasked
 newMask = (oldMask | S_IWGRP | S_IXGRP);
 umask(newMask);
 printf("\nNew Mask = %o\n\n", (int)newMask);
 // Display the changes in the file mode creation mask
 printf("The file mode creation mask now specifies:\n");
 printf(" Group read permission UNMASKED\n");
 printf(" Group write permission MASKED\n");
 printf(" Group execute permission MASKED\n");
 // Repeat the process for user permissions
 oldMask = umask((mode_t)0);
 printf("\n Old mask = %o\n", (int)oldMask);
 if (oldMask & S_IRUSR) {
 printf("\nChanging user read permission from Masked to unmasked.\n");
 oldMask = (oldMask ^ S_IRUSR);
 }
 newMask = (oldMask | S_IWUSR | S_IXUSR);
 umask(newMask);
 printf("\nNew Mask = %o\n\n", (int)newMask);
 printf("The file mode creation mask now specifies:\n");
 printf(" User read permission UNMASKED\n");
 printf(" User write permission MASKED\n");
 printf(" User execute permission MASKED\n");
 // Repeat the process for other (world) permissions
 oldMask = umask((mode_t)0);
 printf("\n Old mask = %o\n", (int)oldMask);
 if (oldMask & S_IROTH) {
 printf("\nChanging Other read permission from Masked to unmasked.\n");
 oldMask = (oldMask ^ S_IROTH);
 }
 newMask = (oldMask | S_IWOTH | S_IXOTH);
 umask(newMask);
 printf("\nNew Mask = %o\n\n", (int)newMask);
 printf("The file mode creation mask now specifies:\n");
 printf(" Other read permission UNMASKED\n");
 printf(" Other write permission MASKED\n");
 printf(" Other execute permission MASKED\n");
 return 0;
}
